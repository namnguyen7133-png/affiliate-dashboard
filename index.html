<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Affiliate Dashboard</title>

<style>
body{
  font-family:Arial,sans-serif;
  background:#f4f6fa;
  max-width:1000px;
  margin:auto;
  padding:15px;
}
h1{text-align:center;color:#0b4f6c}
h3{margin-top:25px}
.menu a{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:14px;
  margin:10px 0;
  font-size:17px;
  text-decoration:none;
  color:#fff;
  border-radius:10px;
}
.menu small{font-size:13px}
.menu button{margin-left:4px}
.done{opacity:.6;text-decoration:line-through}
.blue{background:#1565c0}
.green{background:#2e7d32}
.orange{background:#ef6c00}
.purple{background:#6a1b9a}
.progress{background:#ddd;border-radius:20px;overflow:hidden}
.bar{height:18px;background:#2e7d32;color:#fff;font-size:13px;text-align:center}
.card{
  background:#fff;
  padding:12px;
  border-radius:10px;
  margin:10px 0;
}
textarea{width:100%;height:150px}
input{padding:5px}
.highlight{
  background:#fff3cd;
  border-left:6px solid #ff9800;
}
</style>
</head>

<body>

<h1>ğŸ“Œ AFFILIATE DASHBOARD</h1>

<!-- ===== Æ¯U TIÃŠN ===== -->
<h3>â­ Viá»‡c Æ°u tiÃªn hÃ´m nay</h3>
<div class="card highlight" id="priorityBox">Äang phÃ¢n tÃ­châ€¦</div>

<!-- ===== MENU ===== -->
<h3>ğŸ“‚ CÃ´ng viá»‡c</h3>
<div class="menu" id="menu"></div>

<!-- ===== TIáº¾N Äá»˜ ===== -->
<h3>ğŸ“Š Tiáº¿n Ä‘á»™</h3>
<div class="progress"><div class="bar" id="progressBar">0%</div></div>
<p>âœ… ÄÃ£ lÃ m: <b id="doneCount">0</b> | â³ CÃ²n: <b id="leftCount">0</b></p>

<!-- ===== THá»NG KÃŠ ===== -->
<h3>ğŸ“… Thá»‘ng kÃª</h3>
<div class="card" id="statToday"></div>
<div class="card" id="statWeek"></div>
<div class="card" id="statMonth"></div>

<!-- ===== BÃO CÃO ===== -->
<h3>ğŸ“„ BÃ¡o cÃ¡o</h3>
<button onclick="exportReport()">ğŸ“‹ Xuáº¥t bÃ¡o cÃ¡o</button>
<textarea id="reportBox"></textarea>

<audio id="alarmSound" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg"></audio>

<script>
/* ===== FILES ===== */
const files=[
 "001-tim-ten-nguoi.html",
 "002-thoi-gian-bieu-lam-viec.html",
 "003-shopee-tu-dong-lam-hh.html",
 "004-shopee-tim-chu-cuoi-doan-van.html",
 "005-shopee-tim-san-pham-trang-tri-noi-that.html",
 "006-shopee-tim-san-pham-hot.html",
 "007-shopee-tim-theo-chu-cai.html"
];
const colors=["blue","green","orange","purple"];

const doneMap=JSON.parse(localStorage.getItem("doneMap")||"{}");
const alarmMap=JSON.parse(localStorage.getItem("alarmMap")||"{}");
const history=JSON.parse(localStorage.getItem("history")||"{}");

const menu=document.getElementById("menu");

/* ===== RENDER ===== */
files.forEach((f,i)=>{
  const a=document.createElement("a");
  a.href=f;
  a.className=colors[i%4]+(doneMap[f]?" done":"");
  a.innerHTML=`
    <span>
      ${f.replace(".html","")}
      <br><small>â° ${alarmMap[f]||"--:--"}</small>
    </span>
    <span>
      <input type="time" value="${alarmMap[f]||""}"
        onchange="setAlarm('${f}',this.value)">
      <button onclick="toggleDone(event,'${f}')">
        ${doneMap[f]?"â†©":"âœ”"}
      </button>
    </span>
  `;
  menu.appendChild(a);
});

/* ===== DONE ===== */
function toggleDone(e,f){
  e.preventDefault();
  doneMap[f]=!doneMap[f];
  saveHistory();
  localStorage.setItem("doneMap",JSON.stringify(doneMap));
  location.reload();
}

/* ===== ALARM ===== */
function setAlarm(f,t){
  alarmMap[f]=t;
  localStorage.setItem("alarmMap",JSON.stringify(alarmMap));
}

/* ===== PROGRESS ===== */
const doneCount=files.filter(f=>doneMap[f]).length;
doneCountEl.innerText=doneCount;
leftCount.innerText=files.length-doneCount;
const percent=Math.round(doneCount/files.length*100);
progressBar.style.width=percent+"%";
progressBar.innerText=percent+"%";

/* ===== PRIORITY ===== */
let next=null;
files.forEach(f=>{
  if(!doneMap[f] && alarmMap[f]){
    if(!next || alarmMap[f]<alarmMap[next]) next=f;
  }
});
priorityBox.innerHTML = next
  ? `ğŸ”” <b>${next.replace(".html","")}</b><br>â° ${alarmMap[next]}`
  : "ğŸ‰ KhÃ´ng cÃ²n viá»‡c gáº¥p hÃ´m nay";

/* ===== ALARM CHECK ===== */
setInterval(()=>{
  const n=new Date();
  const cur=n.getHours().toString().padStart(2,"0")+":"+
            n.getMinutes().toString().padStart(2,"0");
  for(const f in alarmMap){
    if(alarmMap[f]===cur && !doneMap[f]){
      alarmSound.play();
      alert("â° Äáº¿n giá» lÃ m: "+f.replace(".html",""));
    }
  }
},1000);

/* ===== HISTORY ===== */
function saveHistory(){
  const d=new Date().toISOString().slice(0,10);
  history[d]=(history[d]||0)+(doneMap?1:0);
  localStorage.setItem("history",JSON.stringify(history));
}

/* ===== STATS ===== */
function stat(days){
  const now=new Date();
  let sum=0;
  for(let i=0;i<days;i++){
    const d=new Date(now);
    d.setDate(now.getDate()-i);
    const k=d.toISOString().slice(0,10);
    sum+=history[k]||0;
  }
  return sum;
}
statToday.innerHTML="ğŸ“… HÃ´m nay hoÃ n thÃ nh: <b>"+stat(1)+"</b>";
statWeek.innerHTML="ğŸ—“ï¸ 7 ngÃ y: <b>"+stat(7)+"</b>";
statMonth.innerHTML="ğŸ“† 30 ngÃ y: <b>"+stat(30)+"</b>";

/* ===== REPORT ===== */
function exportReport(){
  let t="ğŸ“Š BÃO CÃO\n";
  files.forEach(f=>{
    t+=`${doneMap[f]?"âœ…":"â³"} ${f.replace(".html","")} (${alarmMap[f]||"--:--"})\n`;
  });
  reportBox.value=t;
}
</script>

</body>
</html>
