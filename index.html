<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Affiliate Dashboard</title>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
  font-family:Arial,sans-serif;
  background:#f4f6fa;
  max-width:1000px;
  margin:auto;
  padding:15px;
}
h1{text-align:center;color:#0b4f6c}
.card{
  background:#fff;
  padding:15px;
  border-radius:12px;
  margin:15px 0;
}
canvas{
  max-width:100%;
}
</style>
</head>

<body>

<h1>ðŸ“Š AFFILIATE DASHBOARD</h1>

<div class="card">
  <h3>ðŸ’° Hoa há»“ng theo ngÃ y</h3>
  <canvas id="commissionChart" height="120"></canvas>
</div>

<script>
fetch("data/hoa-hong.csv")
  .then(res => res.text())
  .then(text => {

    const rows = text.trim().split("\n").slice(1);

    const labels = [];
    const values = [];

    rows.forEach(row => {
      const [date, commission] = row.split(",");
      labels.push(date);
      values.push(Number(commission));
    });

    const ctx = document
      .getElementById("commissionChart")
      .getContext("2d");

    new Chart(ctx, {
      type: "line",
      data: {
        labels: labels,
        datasets: [{
          label: "Hoa há»“ng (VNÄ)",
          data: values,
          borderWidth: 2,
          tension: 0.35
        }]
      },
      options: {
        responsive: true,
        plugins: {
          tooltip: {
            callbacks: {
              label: ctx =>
                ctx.raw.toLocaleString("vi-VN") + " â‚«"
            }
          }
        },
        scales: {
          y: {
            ticks: {
              callback: v =>
                v.toLocaleString("vi-VN") + " â‚«"
            }
          }
        }
      }
    });
  });
</script>

</body>
</html>
